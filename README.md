# Анализ финансовых транзакций

Визуализация: [Отчет по анализу финансовых транзакций (analysis_output/report.md)](./analysis_output/report.md)

## Структура проекта

Написал небольшой Python-проект, разбитый на модули — чтобы не было одного огромного скрипта, в котором потом ничего не найдёшь:

```
analysis_output/         # результаты
data/                    # исходные данные для анализа
src/
  clean_data.py          # очистка таблиц
  analysis.py            # все аналитические функции
  plot_analysis.py       # визуализации
  utils.py               # утилиты
  generate_md_report.py  # сборка итогового отчёта
main.py                  # точка входа, оркестрирует всё
```

## Шаг 1 — Аудит сырых данных

Перед очисткой прогнал обе таблицы через `audit_df()`. Функция считает: пропуски по столбцам, дубли, выбросы, а для строковых столбцов — распределение значений

Что oбнаружил в `transaction_id.xlsx`:

- пропуски в `amount`, `transaction_id`, `client_id`
- некорректные даты
- дубли в `transaction_id`

Что oбнаружил в `clients_data.xlsx`:

- пропуски в `id`, `age`, `gender`, `net_worth`

---

## Шаг 2 — Очистка данных

### Транзакции

- Удалил строки c пропусками в `client_id`, `amount` (неполучится связать с клиентом и проанализировать выручку)
- Заполнил пропуски в `transaction_id` uuid
- Превел даты к единому формату и удалил строки с невалидными
- Удалил строки с одинаковыми `transaction_id`

### Клиенты

- Удалил строки без `id`
- Пропущенный `net_worth` заполнил нулём, пропущенный `gender` заполнил `Неизвестно`

### Объединение таблиц

Сделал `left join` транзакций на клиентов по `client_id = id`, транзакции без совпадения в клиентской базе выбросил

## Шаг 3 — Анализ данных

### Топ-5 услуг по количеству транзакций

Наибольшую частоту операций показывают инвестиционные и консультационные услуги

### Услуга с наибольшей выручкой

Лидером по общей выручке является инвестиционное консультирование

### Анализ по категориям капитала клиентов

Функция для категоризации клиентов:

```python
def categorize_client_net_worth(capital: float) -> str:
    if capital < 100_000:
        return "Низкий капитал"
    elif capital <= 1_000_000:
        return "Средний капитал"
    else:
        return "Высокий капитал"
```

Основной вклад в выручку вносит сегмент клиентов с высоким капиталом

### Распределение сумм транзакций

Распределение имеет правостороннюю асимметрию: большинство операций - небольшие суммы

### Прогноз на следующий месяц

Использовал простую линейную регрессию по помесячным данным.
Ресемплировал транзакции, обучил две модели — на количество транзакций и на выручку

В отчете видно, что в следующем месяце количество транзакций и общая выручка вероятно будут снижаться

## Шаг 4 — Визуализация

Использовал `matplotlib` и `seaborn`. Сохранял каждый график в отдельный `.png` в папку `analysis_output/plots/`

- горизонтальный бар-чарт выручки по услугам
- бар-чарт выручки по категориям клиентов
- круговая диаграмма по способам оплаты
- линейный график средней суммы транзакции по возрасту
- гистограмма распределения сумм транзакций
- прогнозный график

Сделал автоматическую генерацию MarkDown отчета

## Итог

загрузка -> аудит -> очистка -> повторный аудит -> анализ -> визуализация -> отчёт.
Аудит до и после очистки помогает видеть, что именно было убрано и насколько изменился датасет.
